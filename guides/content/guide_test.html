<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="tags" content="guide, test, example">
    <title>Guide Test</title>
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
    <main>
    <p>Guide Content will be here</p>
</main>
    <footer>
        <!-- Footer content goes here -->
        <div id="bottom-bar" style="background:#fff; color:#222; padding:12px 0; text-align:center; border-top:1.5px solid #ccc; margin-top:0;">
            <a href="https://github.com/AMathBoi" target="_blank" style="color:#222; margin:0 16px; text-decoration:none; font-weight:bold;"><img src="/img/github-icon.png" alt="GitHub Icon" style="width:16px; height:16px; vertical-align:auto;"> GitHub</a>
            <!-- Add more platform links here -->
        </div>
    </footer>
<script>
    function loadTopBar() {
    fetch('/etc/top-bar.html')
        .then(response => response.text())
        .then(html => {
            const topBar = document.createElement('div');
            topBar.innerHTML = html;
            document.body.insertBefore(topBar, document.body.firstChild);

            const menuIcon = topBar.querySelector('.menu-icon img');
            const menu = topBar.querySelector('.menu');

            if (menuIcon && menu) {
                menuIcon.addEventListener('click', (e) => {
                    e.stopPropagation(); // Prevent document click from firing
                    menu.classList.toggle('active');
                });

                // Prevent clicks inside the menu from closing it
                menu.addEventListener('click', (e) => {
                    e.stopPropagation();
                });

                // Clicking outside the menu (on the document, but not on the menu or menu icon) closes the menu
                document.addEventListener('click', function(e) {
                    if (menu.classList.contains('active')) {
                        // If click is outside menu and menu icon
                        if (!menu.contains(e.target) && !menuIcon.contains(e.target)) {
                            menu.classList.remove('active');
                        }
                    }
                });

                // Pressing Escape closes the menu
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape' && menu.classList.contains('active')) {
                        menu.classList.remove('active');
                    }
                });
            }
        });
}

    function handleBottomBar() {
        const bottomBar = document.getElementById('bottom-bar');
        function checkScroll() {
            const scrollY = window.scrollY || window.pageYOffset;
            const windowHeight = window.innerHeight;
            const bodyHeight = document.body.offsetHeight;
            if (scrollY + windowHeight >= bodyHeight - 2) {
                bottomBar.classList.add('active');
            } else {
                bottomBar.classList.remove('active');
            }
        }
        window.addEventListener('scroll', checkScroll);
        window.addEventListener('resize', checkScroll);
        checkScroll();
    }

    loadTopBar();
    handleBottomBar();
</script>
</body>
</html>